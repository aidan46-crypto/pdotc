use std::sync::{LazyLock, OnceLock};

use paste::paste;
use pdotc::client::{Api, ApiBuilder};
use pdotc::network::Kusama;
use ureq::Agent;

use crate::{validate_xt, KeyStore, PDotClient};

static CLIENT: OnceLock<PDotClient<Agent>> = OnceLock::new();

static API: LazyLock<Api<KeyStore, PDotClient<Agent>, Kusama>> = LazyLock::new(|| {
    let client = CLIENT.get_or_init(PDotClient::ksm);
    let keystore = KeyStore::default();
    ApiBuilder::kusama(client).signer(keystore).build().unwrap()
});

validate_xt!(staking_rebond(), "0xad01840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf022a6bad98e4dd1dddac80ddcd93764f90ab4d2d1567fd0727e79ddb5965ab10081ba39ac00559f9fd9c2aeb67a8d8931f8f2f749078b2641842a5d2002b1528bc010000000613a10f");
validate_xt!(staking_bond_extra(), "0xad01840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf0204961cafe51ec33e630eff5fe067344df45bb6c3791fb9b7575c6e8cb4445ae907ac7f78613c25e271c1376d6db548041b69a2e3f053c69c3444527509aef91b000000000601a10f");
validate_xt!(staking_unbond(), "0xad01840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf027b83cd66e1389b63c5cd65261665eb44268bac37687be272a27dbc5bb5da19d57ec034c699f4899ec680d88aaa8117631684de8e7a801a72cf852d397118087f010000000602a10f");
validate_xt!(staking_withdraw_unbonded(), "0xb501840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf022f34a037f86df3c3915071b0aaff1054b1fc4ad230191be7b76c0eec17d068f36ed6222c7ef682a825566b396df633789130e03aa3a5c64419527cc679b53e3e00000000060300000000");
validate_xt!(staking_chill(), "0xa501840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf02a5ac4bd5064e83d1ddd3e3f7a8dfd3889b05422705998a87f6d72abaa88c99153ca7b1ad0608f7776e767795c1b7d73d5d9e6bdad3f56a18a6e168583eb76dd0010000000606");
validate_xt!(
    balance_transfer("GvWdZbtNY8nSFBfZ2Jr9V8hdo2F84jPdn8BBV55AQtgUsjq"),
    "0x3102840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf029e32e884c16c50f795a61ce9d46ae199c26be8ed67ac32335e9a2b16087b06146399009527476db359a60f21fbda9d19be8ce09120ac61c13a938d57980c668d00000000040000c05740c342cde29bac622eba115bca3c9d2d194ef52aac55c58208cfbff8a931a10f"
);
validate_xt!(
    staking_bond("GvWdZbtNY8nSFBfZ2Jr9V8hdo2F84jPdn8BBV55AQtgUsjq"),
    "0x3502840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf02708d2d0b2e501a15dfa52da7a9b35ddf6953ae609eb31efe3dcaff4e4123efac1d4ded2a49adbeeb8598aedb80ddf0283c683aae3dbb9528a7df2b3c58859f4700000000060000c05740c342cde29bac622eba115bca3c9d2d194ef52aac55c58208cfbff8a931a10f01"
);
validate_xt!(
    staking_nominate("GvWdZbtNY8nSFBfZ2Jr9V8hdo2F84jPdn8BBV55AQtgUsjq"),
    "0x2d02840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf02e80aba7da60e06d7a8b10c9801eff3b30160c2763dea579eb0a1783cf63499065d3c3ce49b09417f7beb5e69a38ffa7343b72eab0a271cd9069310b6673394c20000000006050400c05740c342cde29bac622eba115bca3c9d2d194ef52aac55c58208cfbff8a931"
);
validate_xt!(
    staking_set_controller("GvWdZbtNY8nSFBfZ2Jr9V8hdo2F84jPdn8BBV55AQtgUsjq"),
    "0x2902840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf02addc87885e6b38ba5356cf2ff316b870a58b5f810d8320ffc0918608137ffd535b9a6c46760a36cc11387b8d656960fe4d525cb8703e493318ecf27acf0ceacb01000000060800c05740c342cde29bac622eba115bca3c9d2d194ef52aac55c58208cfbff8a931"
);
validate_xt!(
    proxy_add_proxy("GvWdZbtNY8nSFBfZ2Jr9V8hdo2F84jPdn8BBV55AQtgUsjq"),
    "0x3902840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf02f612b8666aecc6dfc0d4bb22e1bf7040ad9aec99e0acca81e942d45433d7fa353a30861dfa810adcec386e2d3bbf5a4e73de70a0e9ebb2b3a7d18d9a6a03a6bb000000001e01c05740c342cde29bac622eba115bca3c9d2d194ef52aac55c58208cfbff8a9310300000000"
);
validate_xt!(
    proxy_remove_proxy("GvWdZbtNY8nSFBfZ2Jr9V8hdo2F84jPdn8BBV55AQtgUsjq"),
    "0x3902840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf026d1f5b828d56da9b4d0006d7a5030365ca521b051883ab7f124963d905b51b8017bb5e916ce5d25901f0c1f8a05f9e8963754840a99b26438ac3019e578c7819010000001e02c05740c342cde29bac622eba115bca3c9d2d194ef52aac55c58208cfbff8a9310300000000"
);
validate_xt!(proxy_remove_proxies(), "0xa501840023c0b6f69f5aff6c91972c64d1f7d1d22c78f825796553f4a261f514712dafaf02432c5c2c70b40b5cd855986eeffd2758a7c65b7526155a107914858a94b6ad3304cf041e92a45b470db90e682ff44d22fe13848407a6b282f676481d9bfc23a5000000001e03");
